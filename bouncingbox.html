<!DOCTYPE HTML>
<html>
    <head>
        <style>
            #box {
                width: 50px;
                height: 50px;
                background-color: red;
                position: absolute;
            }
            #container {
                position:absolute;
                width: 750px;
                height: 500px;
                border-style: solid;
                border-width: 5px;
                top: 0%;
                left: 0%;
            }
            #tracker {
                height: 100px;
                width: 400px;
                border-style: solid;
                border-width: 2px;
                position: absolute;
                top: 5px;
                left: 0px;
                text-align: center;
            }
            #clickerBox {
                height: 50px;
                width: 400px;
                border-style: solid;
                border-width: 2px;
                top: 125px;
                left: 0px;
                text-align: center;
                position:absolute;
            }
            #upgradeBox {
                height: 50px;
                width: 400px;
                border-style: solid;
                border-width: 2px;
                top: 195px;
                position: absolute;
                text-align: center;
                left: 0px;
            }
        </style>
    </head>
    <body>
        <div id = "box">

        </div>
        <div id = "container">

        </div>
        <div id = "tracker">
            <p id = "bounces"> Hits: 0 </p>
            <p id = "cornerHits"> Corner Hits: 0 </p>
        </div>
        <div id = "clickerBox">
            <p id = "pointsMessage"> Points: 0 </p>
        </div>
        <div id = "upgradeBox">
            <p id = "upgradePointsPerBounce"> Upgrade Points Per Bounce [0] </p>
        </div>
    </body>
</html>
<script>
  //updateCheck should only be raised, it should never go down. Whenever you want to clear everyone's progress and get rid of their cookies, set it higher by 1.
  //ex: if it was "updateCheck=1", set the new one to "updateCheck=2"
  var updateCheck = 0.001;
  if (JSON.parse(window.localStorage.getItem("updateCheck")) != updateCheck) {
    //This code runs on the first time loading a website or after an update (forced progress/cookies clear)
    var stringUpdateCheck = "" + updateCheck + "";
    window.localStorage.setItem("updateCheck", stringUpdateCheck);
    var points = 0;
    window.localStorage.setItem("points", "0");
    var pointGain = 1;
    window.localStorage.setItem("pointGain","1");
    var hits = 0;
    window.localStorage.setItem("totalHits","0");
    var cornerHits = 0;
    window.localStorage.setItem("cornerHits","0");
    var cornerMultiplier = 15;
    window.localStorage.setItem("cornerMultiplier","15");
    var upgradePPBCost = 30;
    window.localStorage.setItem("upgradePPBCost","30");
  } else {
    //This code runs on every other join except the first one or after an update/forced clear.
    var points = JSON.parse(window.localStorage.getItem("points"));
    document.getElementById("pointsMessage").innerText = "Points: " + points;
    var pointGain = JSON.parse(window.localStorage.getItem("pointGain"));
    var hits = JSON.parse(window.localStorage.getItem("totalHits"));
    var cornerHits = JSON.parse(window.localStorage.getItem("cornerHits"));
    var cornerMultiplier = JSON.parse(window.localStorage.getItem("cornerMultiplier"));
    var upgradePPBCost = JSON.parge(window.localStorage.getItem("upgradePPBCost"));
  }
    var box = document.getElementById("box");
    var container = document.getElementById("container");
    var tracker = document.getElementById("tracker");
    var infoLoc = container.offsetWidth + 20;
    var infoLocHeight = container.offsetHeight + 20;
    var infoLocMessageWidth = container.offsetWidth - 10;
    var clickerBox = document.getElementById("clickerBox");
    var upgradeBox = document.getElementById("upgradeBox");
    var upgradePoint
    upgradeBox.style.left = infoLoc + "px";
    tracker.style.left = infoLoc + "px";
    clickerBox.style.left = infoLoc + "px";
    var leftAmount = 100;
    var topAmount = 100;
    var directionLeft = 0;
    var directionTop = 0;
    var topLocation = 0;
    var leftLocation = 0;
    var mostTop = 0;
    var mostLeft = 0;
    var cornerCheck = 0;
    var pointsSave = 0;
    var pointGainSave = 0;
    var hitsSave = 0;
    var cornerHitsSave = 0;
    var cornerMultiplierSave = 0;
    setInterval(update,1);
    function update() {
        mostTop = container.offsetHeight - 50;
        mostLeft = container.offsetWidth - 50;
        topLocation = topAmount / mostTop;
        topLocation = topLocation * 100;
        leftLocation = leftAmount / mostLeft;
        leftLocation = leftLocation * 100;
        if (topLocation >= 100) {
            directionTop = 1;
            cornerCheck += 1;
        }
        if (topLocation <= 0) {
            directionTop = 0;
            cornerCheck += 1;
        }
        if (leftLocation >= 100) {
            directionLeft = 1;
            cornerCheck += 1;
        }
        if (leftLocation <= 0) {
            directionLeft = 0;
            cornerCheck += 1;
        }
        if (directionLeft === 0) {
            leftAmount += 1;
        }
        if (directionTop === 0) {
            topAmount += 1;
        }
        if (directionLeft === 1) {
            leftAmount = leftAmount - 1;
        }
        if (directionTop === 1) {
            topAmount = topAmount - 1;
        }
        document.getElementById("bounces").innerText = "Total Hits: " + hits;
        if (cornerCheck >= 2) {
            cornerHits += 1;
            cornerHitsSave = "" + cornerHits + "";
            window.localStorage.setItem("cornerHits",cornerHitsSave);
            hits += 1;
            hitsSave = "" + hits + "";
            window.localStorage.setItem("totalHits", hitsSave);
            points += pointGain * cornerMultiplier
            pointsSave = "" + points + "";
            window.localStorage.setItem("points", pointsSave);
        } else if (cornerCheck === 1) {
            hits += 1;
            hitsSave = "" + hits + "";
            window.localStorage.setItem("totalHits", hitsSave);
            points += pointGain;
            pointsSave = "" + points + "";
            window.localStorage.setItem("points", pointsSave);
        }
        document.getElementById("cornerHits").innerText = "Corner Hits: " + cornerHits;
        document.getElementById("pointsMessage").innerText = "Points: " + points;
        cornerCheck = 0;
        box.style.left = leftAmount + "px";
        box.style.top = topAmount + "px";
    }
</script>